{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 275,
  "height": 400,
  "title": {
    "text": "Malaysia Mean Household Expenditure by Region (2016â€“2022)",
    "font": "Bree Serif",
    "fontSize": 18,
    "anchor": "middle",
    "dy": -10
  },
  "data": {
        "url": "https://raw.githubusercontent.com/xuenhan/FIT3179_Assignment2/main/mean_household_expenditure.csv"
  },
  "transform": [
    {"filter": "datum.state != 'Malaysia'"},
    {
        "calculate": "datum.state == 'Perlis' || datum.state == 'Kedah' || datum.state == 'Pulau Pinang' || datum.state == 'Perak' ? 'Northern' : datum.state == 'Selangor' || datum.state == 'W.P. Kuala Lumpur' || datum.state == 'W.P. Putrajaya' || datum.state == 'Negeri Sembilan' ? 'Central' : datum.state == 'Melaka' || datum.state == 'Johor' ? 'Southern' : datum.state == 'Kelantan' || datum.state == 'Terengganu' || datum.state == 'Pahang' ? 'East Coast' : datum.state == 'Sabah' || datum.state == 'Sarawak' || datum.state == 'W.P. Labuan' ? 'East Malaysia' : 'Other'",
        "as": "region"
    },
    {
      "aggregate": [
        {"op": "mean", "field": "expenditure_mean", "as": "mean_expenditure"}
      ],
      "groupby": ["region", "year"]
    }
  ],
  "mark": {
    "type": "bar",
    "cornerRadiusTopLeft": 2,
    "cornerRadiusTopRight": 2
  },
  "encoding": {
    "x": {
      "field": "year",
      "type": "ordinal",
      "axis": {"title": "Year"}
    },
    "y": {
      "field": "mean_expenditure",
      "type": "quantitative",
      "axis": {"title": "Mean Household Expenditure (RM)"}
    },
    "color": {
        "field": "region",
        "type": "nominal",
        "legend": {"title": "Region"},
        "scale": {
            "domain": ["Southern", "Northern", "East Malaysia", "East Coast", "Central"],
            "range": ["#6C63A6", "#5E77B8", "#4F8CC9", "#4A9ED1", "#4590B0"]
        }
    },
    "tooltip": [
      {"field": "year", "title": "Year"},
      {"field": "region", "title": "Region"},
      {"field": "mean_expenditure", "title": "Total Expenditure (RM)", "format": ",.2f"}
    ]
  },
  "resolve": {"scale": {"y": "independent"}},
  "config": {
    "view": {"stroke": "transparent"},
    "title": {
      "font": "Bree Serif",
      "fontSize": 18,
      "anchor": "start",
      "color": "#333"
    },
    "axis": {
      "labelFont": "Sora",
      "titleFont": "Bree Serif",
      "labelFontSize": 12,
      "titleFontSize": 13
    },
    "legend": {
      "titleFont": "Bree Serif",
      "titleFontSize": 14,
      "labelFontSize": 12,
      "labelFont": "Sora",
      "symbolSize": 150
    }
  }
}
